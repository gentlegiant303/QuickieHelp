<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>QuickieHelp</title>
  <script src="https://apis.google.com/js/api.js"></script>
  <script>
      function start() {
          // 2. Initialize the JavaScript client library.
          gapi.client.init({
              'apiKey': 'AIzaSyBZJcuSuQ60EoER2xhWtbKj_8_-zwZkgWA',
              // clientId and scope are optional if auth is not required.
              'clientId': '601954114317-c10280jjsdfouibgm5uerhdo59laoqi6.apps.googleusercontent.com',
              'scope': 'profile',
          }).then(function() {
              // 3. Initialize and make the API request.
              return gapi.client.request({
                  'path': 'https://people.googleapis.com/v1/people/me?requestMask.includeField=person.names',
              })
          }).then(function(response) {
              console.log(response.result);
          }, function(reason) {
              // console.log('Error: ' + reason.result.error.message);
          });
      };
      // 1. Load the JavaScript client library.
      gapi.load('client', start);
  </script>

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom fonts for this template -->
  <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Nunito" rel="stylesheet">

  <!-- Plugin CSS -->
  <link href="vendor/magnific-popup/magnific-popup.css" rel="stylesheet" type="text/css">

  <!-- Custom styles for this template -->
  <link href="css/charity.min.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">

</head>

<body id="page-top">

<!-- Navigation -->
<nav class="navbar navbar-expand-lg bg-secondary fixed-top" id="mainNav">
  <div class="container-fluid">
    <a class="navbar-brand js-scroll-trigger"><img src="img/logo.png" alt="logo"></a>
    <button class="navbar-toggler navbar-toggler-right bg-primary text-white rounded" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fa fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item mx-0 mx-lg-1">
          <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="login.html">log in</a>
        </li>
        <li class="nav-item mx-0 mx-lg-1">
          <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="helper_profile.html">sign up</a>
        </li>
        <li class="nav-item mx-0 mx-lg-1">
          <div class="btn-group">
            <a class="btn dropdown-toggle" data-toggle="dropdown" id="charityDropdown" href="#">
              charities
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
              <li class="dropdown-item"><a href="charity_eventpage.html">
                create event
              </li>
              <li class="dropdown-item"><a href="aboutus.html">
                learn more
              </li>
            </ul>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Header -->
<header class="masthead bg-primary text-white text-center">
  <div>
    <img id="womenpic" src="img/women.jpg" alt="signupnow">
    <button type="button" id="signupbtn" class="btn btn-primary btn-lg"><a href="signup.html">sign up</button></a>
  </div>
</header>

<!-- Charity Grid Section -->
<section class="charities" id="charities">
  <div class="container-fluid">
    <h2 class="text-left text-secondary mb-0" id="volunteer">Volunteer opportunities:</h2>
    <br>
    <div class="row">
      <div class="col-md-6 col-lg-4">
        <a class="charity-item d-block mx-auto" href="#charity-modal-1">
          <div class="charity-item-caption d-flex position-absolute h-100 w-100">
            <div class="charity-item-caption-content my-auto w-100 text-center text-white">
              <i class="fa fa-search-plus fa-3x"></i>
            </div>
          </div>
          <img class="img-fluid" src="img/charity_top/puppyrun.png" alt="">
        </a>
      </div>
      <div class="col-md-6 col-lg-4">
        <a class="charity-item d-block mx-auto" href="#charity-modal-2">
          <div class="charity-item-caption d-flex position-absolute h-100 w-100">
            <div class="charity-item-caption-content my-auto w-100 text-center text-white">
              <i class="fa fa-search-plus fa-3x"></i>
            </div>
          </div>
          <img class="img-fluid" src="img/charity_top/breakfast.png" alt="">
        </a>
      </div>
      <div class="col-md-6 col-lg-4">
        <a class="charity-item d-block mx-auto" href="#charity-modal-3">
          <div class="charity-item-caption d-flex position-absolute h-100 w-100">
            <div class="charity-item-caption-content my-auto w-100 text-center text-white">
              <i class="fa fa-search-plus fa-3x"></i>
            </div>
          </div>
          <img class="img-fluid" src="img/charity_top/park.png" alt="">
        </a>
      </div>
      <div class="col-md-6 col-lg-4">
        <a class="charity-item d-block mx-auto" href="#charity-modal-4">
          <div class="charity-item-caption d-flex position-absolute h-100 w-100">
            <div class="charity-item-caption-content my-auto w-100 text-center text-white">
              <i class="fa fa-search-plus fa-3x"></i>
            </div>
          </div>
          <img class="img-fluid" src="img/charity_top/mentor.png" alt="">
        </a>
      </div>
      <div class="col-md-6 col-lg-4">
        <a class="charity-item d-block mx-auto" href="#charity-modal-5">
          <div class="charity-item-caption d-flex position-absolute h-100 w-100">
            <div class="charity-item-caption-content my-auto w-100 text-center text-white">
              <i class="fa fa-search-plus fa-3x"></i>
            </div>
          </div>
          <img class="img-fluid" src="img/charity_top/home.png" alt="">
        </a>
      </div>
      <div class="col-md-6 col-lg-4">
        <a class="charity-item d-block mx-auto" href="#charity-modal-6">
          <div class="charity-item-caption d-flex position-absolute h-100 w-100">
            <div class="charity-item-caption-content my-auto w-100 text-center text-white">
              <i class="fa fa-search-plus fa-3x"></i>
            </div>
          </div>
          <img class="img-fluid" src="img/charity_top/teach.png" alt="">
        </a>
      </div>
    </div>
  </div>
</section>

<!-- Section Divider -->

<!-- Testimonial Section -->
<!--Section: Testimonials v.1-->
<section id="testimonialSection" class="pb-3 text-center">
  <div class="container">

    <!--Section heading-->
    <h1 id="testimonialTitle" class="font-bold h1 py-5">Testimonials</h1>
    <!--Section description-->

    <div class="row">

      <!--Grid column-->
      <div class="col-lg-4 col-md-12 mb-r">

        <!--Card-->
        <div class="card testimonial-card">

          <!--Background color-->
          <div class="card-up info-color"></div>

          <!--Avatar-->
          <div class="avatar">
            <img src="https://mdbootstrap.com/img/Photos/Avatars/img%20(9).jpg" class="rounded-circle img-responsive">
          </div>

          <div class="card-body">
            <!--Name-->
            <h4 class="mt-1">
              <strong>Really Attractive Guy</strong>
            </h4>
            <hr>
            <!--Quotation-->
            <p class="dark-grey-text">Dude, I met so many cool ladies on this site. Plus, I get a chance to give back to my community. I might just look like a self-absorbed tool, but in reality...I care.</p>
          </div>

        </div>
        <!--Card-->

      </div>
      <!--Grid column-->

      <!--Grid column-->
      <div class="col-lg-4 col-md-12 mb-r">

        <!--Card-->
        <div class="card testimonial-card">

          <!--Background color-->
          <div class="card-up blue-gradient">
          </div>

          <!--Avatar-->
          <div class="avatar">
            <img src="https://mdbootstrap.com/img/Photos/Avatars/img%20(20).jpg" class="rounded-circle img-responsive">
          </div>

          <div class="card-body">
            <!--Name-->
            <h4 class="mt-1">
              <strong>Happy Couple</strong>
            </h4>
            <hr>
            <!--Quotation-->
            <p class="dark-grey-text">We met 6 months ago doing a charity event for Denver Rescue Mission. We still do Quickie events...but now we do it as a couple!</p>
          </div>

        </div>
        <!--Card-->

      </div>
      <!--Grid column-->

      <!--Grid column-->
      <div class="col-lg-4 col-md-12 mb-r">

        <!--Card-->
        <div class="card testimonial-card">

          <!--Background color-->
          <div class="card-up indigo"></div>

          <!--Avatar-->
          <div class="avatar">
            <img src="https://mdbootstrap.com/img/Photos/Avatars/img%20(10).jpg" class="rounded-circle img-responsive">
          </div>

          <div class="card-body">
            <!--Name-->
            <h4 class="mt-1">
              <strong>Cute Nerd</strong>
            </h4>
            <hr>
            <!--Quotation-->
            <p class="dark-grey-text">I hate men, and women. And people. But, I like volunteering and this site lets me plausibly lie to my therapist that I'm socializing more.</p>
          </div>

        </div>
        <!--Card-->

      </div>
      <!--Grid column-->

    </div>

</section>
</div>
<!--Section: Testimonials v.1-->

<!--Footer-->
<footer class="page-footer indigo center-on-small-only pt-0">

  <!--Footer Links-->
  <div class="container-fluid">

    <!--First row-->
    <div class="row">

      <!--First column-->
      <div class="col-md-6">
        <ul id="footerList">
          <li class="footerItems"><a href="#about">About</a></li>
          <li class="footerItems"><a href="#contact">Contact</a></li>
          <li class="footerItems"><a href="#support">Support</a></li>
        </ul>
      </div>
      <div class="col-md-6">

        <div id="socialmedia" class="footer-socials mb-5 flex-center">

          <!--Facebook-->
          <a class="icons-sm fb-ic"><i class="fa fa-facebook fa-lg white-text mr-md-4"> </i></a>
          <!--Twitter-->
          <a class="icons-sm tw-ic"><i class="fa fa-twitter fa-lg white-text mr-md-4"> </i></a>
          <!--Google +-->
          <a class="icons-sm gplus-ic"><i class="fa fa-google-plus fa-lg white-text mr-md-4"> </i></a>

          <!--Instagram-->
          <a class="icons-sm ins-ic"><i class="fa fa-instagram fa-lg white-text mr-md-4"> </i></a>
          <!--Pinterest-->
          <a class="icons-sm pin-ic"><i class="fa fa-pinterest fa-lg white-text"> </i></a>
        </div>
      </div>
      <!--/First column-->
    </div>
    <!--/First row-->
  </div>
  <!--/Footer Links-->

  <!--Copyright-->
  <div id="copyright" class="footer-copyright">
    <div class="container-fluid">
      © 2018 Copyright: QuickieHelp
    </div>
  </div>
  <!--/Copyright-->

</footer>
<!--/Footer-->



<!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
<div class="scroll-to-top d-lg-none position-fixed ">
  <a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top">
    <i class="fa fa-chevron-up"></i>
  </a>
</div>

<!-- Charity Modals -->

<!-- Charity Modal 1 -->
<div class="charity-modal mfp-hide" id="charity-modal-1">
  <div class="charity-modal-dialog bg-white">
    <a class="close-button d-none d-md-block charity-modal-dismiss" href="#">
      <i class="fa fa-3x fa-times"></i>
    </a>
    <div class="container text-center">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <h2 class="text-secondary mb-0">Event Details:</h2>
          <img class="img-fluid mb-5" src="img/charity_top/puppyrun.png" alt="">
          <p class="mb-5">Come meet fellow dog lovers at the 3rd annual Puppy Run. Registered at the event. $5 entrance fee. Water and snacks included throughout the run.</p>
          <div id="map">


          </div>
          <a class="btn btn-primary btn-lg rounded-pill charity-modal-dismiss" href="#">
            <i class="fa fa-close"></i>
            Close Event</a>
          <c class="btn btn-primary btn-lg rounded-pill" id="addToCalendar">
            Add to Calendar</c>
          <script>
              let Event = {
                  'summary': 'Puppy Run',
                  'location': 'Dumb Friends League',
                  'description': 'Come meet fellow dog lovers at the 3rd annual Puppy Run. Registered at the event. $5 entrance fee. Water and snacks included throughout the run.',
                  'start': {
                      'dateTime': '2018-01-31T08:00:00-08:00',
                      'timeZone': 'America/Denver',
                  },
                  'end': {
                      'dateTime': '2018-01-31T14:00:00-08:00',
                      'timeZone': 'America/Denver',
                  },
              };
          </script>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Charity Modal 2 -->
<div class="charity-modal mfp-hide" id="charity-modal-2">
  <div class="charity-modal-dialog bg-white">
    <a class="close-button d-none d-md-block charity-modal-dismiss" href="#">
      <i class="fa fa-3x fa-times"></i>
    </a>
    <div class="container text-center">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <h2 class="text-secondary  mb-0">Event Details:</h2>
          <img class="img-fluid mb-5" src="img/charity_top/breakfast.png" alt="">
          <p class="mb-5">Urban Peak is looking for community members interested in serving a hot breakfast to our community's homeless youth. Time commitments of 2-3 hours, and all supplies provided.</p>
          <a class="btn btn-primary btn-lg rounded-pill charity-modal-dismiss" href="#">
            <i class="fa fa-close"></i>

            Close Event</a>

            Close Project</a>
          <c class="btn btn-primary btn-lg rounded-pill" id="addToCalendar">
          Add to Calendar</c>
            <e class="btn btn-primary btn-lg rounded-pill" id="signout-button">
              Sign Out</e>

    <pre id="content"></pre>

    <script type="text/javascript">
      // Client ID and API key from the Developer Console
      var CLIENT_ID = '601954114317-c10280jjsdfouibgm5uerhdo59laoqi6.apps.googleusercontent.com';
      var API_KEY = 'AIzaSyBZJcuSuQ60EoER2xhWtbKj_8_-zwZkgWA';

      // Array of API discovery doc URLs for APIs used by the quickstart
      var DISCOVERY_DOCS = ["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"];

      // Authorization scopes required by the API; multiple scopes can be
      // included, separated by spaces.
      var SCOPES = "https://www.googleapis.com/auth/calendar.readonly";

      var authorizeButton = document.getElementById('addToCalendar');
      var signoutButton = document.getElementById('signout-button');

      /**
       *  On load, called to load the auth2 library and API client library.
       */
      function handleClientLoad() {
        gapi.load('client:auth2', initClient);
      }

      /**
       *  Initializes the API client library and sets up sign-in state
       *  listeners.
       */
      function initClient() {
        gapi.client.init({
          apiKey: API_KEY,
          clientId: CLIENT_ID,
          discoveryDocs: DISCOVERY_DOCS,
          scope: SCOPES
        }).then(function () {
          // Listen for sign-in state changes.
          gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);

          // Handle the initial sign-in state.
          updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
          authorizeButton.onclick = handleAuthClick;
          signoutButton.onclick = handleSignoutClick;
        });
      }

      /**
       *  Called when the signed in status changes, to update the UI
       *  appropriately. After a sign-in, the API is called.
       */
      function updateSigninStatus(isSignedIn) {
        if (isSignedIn) {
          authorizeButton.style.display = 'none';
          signoutButton.style.display = 'block';
          listUpcomingEvents();
        } else {
          authorizeButton.style.display = 'block';
          signoutButton.style.display = 'none';
        }
      }

      /**
       *  Sign in the user upon button click.
       */
      function handleAuthClick(event) {
        gapi.auth2.getAuthInstance().signIn();
      }

      /**
       *  Sign out the user upon button click.
       */
      function handleSignoutClick(event) {
        gapi.auth2.getAuthInstance().signOut();
      }

      /**
       * Append a pre element to the body containing the given message
       * as its text node. Used to display the results of the API call.
       *
       * @param {string} message Text to be placed in pre element.
       */
      function appendPre(message) {
        var pre = document.getElementById('content');
        var textContent = document.createTextNode(message + '\n');
        pre.appendChild(textContent);
      }

      /**
       * Print the summary and start datetime/date of the next ten events in
       * the authorized user's calendar. If no events are found an
       * appropriate message is printed.
       */
      function listUpcomingEvents() {
        gapi.client.calendar.events.list({
          'calendarId': 'primary',
          'timeMin': (new Date()).toISOString(),
          'showDeleted': false,
          'singleEvents': true,
          'maxResults': 10,
          'orderBy': 'startTime'
        }).then(function(response) {
          var events = response.result.items;
          appendPre('Upcoming events:');

          if (events.length > 0) {
            for (i = 0; i < events.length; i++) {
              var event = events[i];
              var when = event.start.dateTime;
              if (!when) {
                when = event.start.date;
              }
              appendPre(event.summary + ' (' + when + ')')
            }
          } else {
            appendPre('No upcoming events found.');
          }
        });
      }

    </script>

    <script async defer src="https://apis.google.com/js/api.js"
      onload="this.onload=function(){};handleClientLoad()"
      onreadystatechange="if (this.readyState === 'complete') this.onload()">
    </script>


        </div>
      </div>
    </div>
  </div>
</div>


<!-- Charity Modal 3 -->
<div class="charity-modal mfp-hide" id="charity-modal-3">
  <div class="charity-modal-dialog bg-white">
    <a class="close-button d-none d-md-block charity-modal-dismiss" href="#">
      <i class="fa fa-3x fa-times"></i>
    </a>
    <div class="container text-center">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <h2 class="text-secondary mb-0">Event Details:</h2>
          <img class="img-fluid mb-5" src="img/charity_top/park.png" alt="">
          <p class="mb-5">One of our state's greatest parks is in need of some clean-up. Hike the beautiful trail, meet new people, and restore our environment.</p>
          <a class="btn btn-primary btn-lg rounded-pill charity-modal-dismiss" href="#">
            <i class="fa fa-close"></i>
            Close Event</a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Charity Modal 4 -->
<div class="charity-modal mfp-hide" id="charity-modal-4">
  <div class="charity-modal-dialog bg-white">
    <a class="close-button d-none d-md-block charity-modal-dismiss" href="#">
      <i class="fa fa-3x fa-times"></i>
    </a>
    <div class="container text-center">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <h2 class="text-secondary mb-0">Event Details:</h2>
          <img class="img-fluid mb-5" src="img/charity_top/mentor.png" alt="">
          <p class="mb-5">The Denver Rescue Mission is looking for mentors between the ages of 25-40 to mentor area youth. Mentoring includes weekly check-ins, monthly meet-ups, and lifelong connections.</p>
          <a class="btn btn-primary btn-lg rounded-pill charity-modal-dismiss" href="#">
            <i class="fa fa-close"></i>
            Close Event</a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Charity Modal 5 -->
<div class="charity-modal mfp-hide" id="charity-modal-5">
  <div class="charity-modal-dialog bg-white">
    <a class="close-button d-none d-md-block charity-modal-dismiss" href="#">
      <i class="fa fa-3x fa-times"></i>
    </a>
    <div class="container text-center">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <h2 class="text-secondary mb-0">Event Details:</h2>
          <img class="img-fluid mb-5" src="img/charity_top/home.png" alt="">
          <p class="mb-5">Build a house. Create a home. Habitat for Humanity is looking for community members to work weekend building shifts. No experience needed. Bring your own gloves and hammer.</p>
          <a class="btn btn-primary btn-lg rounded-pill charity-modal-dismiss" href="#">
            <i class="fa fa-close"></i>
            Close Event</a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Charity Modal 6 -->
<div class="charity-modal mfp-hide" id="charity-modal-6">
  <div class="charity-modal-dialog bg-white">
    <a class="close-button d-none d-md-block charity-modal-dismiss" href="#">
      <i class="fa fa-3x fa-times"></i>
    </a>
    <div class="container text-center">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <h2 class="text-secondary mb-0">Event Details:</h2>
          <img class="img-fluid mb-5" src="img/charity_top/teach.png" alt="">
          <p class="mb-5">Art is the foundation of education. Help area youth discover art and their creative side. Multiple times available--information session on the 1st of Feb.</p>
          <a class="btn btn-primary btn-lg rounded-pill charity-modal-dismiss" href="#">
            <i class="fa fa-close"></i>
            Close Event</a>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- Bootstrap core JavaScript -->
<script src="vendor/jquery/jquery.min.js"></script>
<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

<!-- Plugin JavaScript -->
<script src="vendor/jquery-easing/jquery.easing.min.js"></script>
<script src="vendor/magnific-popup/jquery.magnific-popup.min.js"></script>

<!-- Contact Form JavaScript -->
<script src="js/jqBootstrapValidation.js"></script>
<script src="js/contact_me.js"></script>

<!-- Custom scripts for this template -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBZJcuSuQ60EoER2xhWtbKj_8_-zwZkgWA"
        async defer></script>
<script src="js/charity.min.js"></script>
<script src="js/quickie.js"></script>


<script src="https://apis.google.com/js/api.js"></script>

<script>
$("#signout-button").on("click", function() {
  var Event = {
  'summary': 'Dinner',
  'location': 'Epic',
  'description': 'Get Coding!',
  'start': {
  'dateTime': '2018-01-30T18:30:00-19:30',
  'timeZone': 'Pacific/Auckland',
  },
  'end': {
  'dateTime': '2018-04-30T19:30:00-20:00',
  'timeZone': 'Pacific/Auckland',
  },
  'recurrence': [
  'RRULE:FREQ=DAILY;COUNT=2'
  ],
  'attendees': [
  {'email': 'lpage@example.com'},
  {'email': 'sbrin@example.com'},
  ],
  'reminders': {
  'useDefault': false,
  'overrides': [
    {'method': 'email', 'minutes': 24 * 60},
    {'method': 'popup', 'minutes': 10},
  ],
  },
};

var request = gapi.client.calendar.events.insert({
  'calendarId': 'primary',
  'resource': Event
});

request.execute(function(event) {
  appendPre('Event created: ' + Event.summary);
});
$("#addToCalendar").on("click", function() {
  function start() {
    // 2. Initialize the JavaScript client library.
    gapi.client.init({
      'apiKey': 'AIzaSyBZJcuSuQ60EoER2xhWtbKj_8_-zwZkgWA',
      // Your API key will be automatically added to the Discovery Document URLs.
      'discoveryDocs': ['https://people.googleapis.com/$discovery/rest'],
      // clientId and scope are optional if auth is not required.
      'clientId': '601954114317-c10280jjsdfouibgm5uerhdo59laoqi6.apps.googleusercontent.com',
      'scope': 'profile',
    }).then(function() {
      // 3. Initialize and make the API request.
      return gapi.client.people.people.get({
        'resourceName': 'people/me',
        'requestMask.includeField': 'person.names'
      });
    }).then(function(response) {
      console.log(response.result);
    }, function(reason) {
      console.log('Error: ' + reason.result.error.message);
    });
  };
  // 1. Load the JavaScript client library.
  gapi.load('client', start);
});

$()
function googleApi() {
  // Client ID and API key from the Developer Console
  var CLIENT_ID = '601954114317-c10280jjsdfouibgm5uerhdo59laoqi6.apps.googleusercontent.com';
  var API_KEY = 'AIzaSyBZJcuSuQ60EoER2xhWtbKj_8_-zwZkgWA';

  // Array of API discovery doc URLs for APIs used by the quickstart
  var DISCOVERY_DOCS = ["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"];

  // Authorization scopes required by the API; multiple scopes can be
  // included, separated by spaces.
  var SCOPES = "https://www.googleapis.com/auth/calendar.readonly";

  var authorizeButton = document.getElementById('addToCalendar');
  var signoutButton = document.getElementById('signout-button');

  /**
   *  On load, called to load the auth2 library and API client library.
   */
  function handleClientLoad() {
    gapi.load('client:auth2', initClient);
  }

  /**
   *  Initializes the API client library and sets up sign-in state
   *  listeners.
   */
  function initClient() {
    gapi.client.init({
      apiKey: API_KEY,
      clientId: CLIENT_ID,
      discoveryDocs: DISCOVERY_DOCS,
      scope: SCOPES
    }).then(function () {
      // Listen for sign-in state changes.
      gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);

      // Handle the initial sign-in state.
      updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
      authorizeButton.onclick = handleAuthClick;
      signoutButton.onclick = handleSignoutClick;
    });
  }

  /**
   *  Called when the signed in status changes, to update the UI
   *  appropriately. After a sign-in, the API is called.
   */
  function updateSigninStatus(isSignedIn) {
    if (isSignedIn) {
      authorizeButton.style.display = 'none';
      signoutButton.style.display = 'block';
      listUpcomingEvents();
    } else {
      authorizeButton.style.display = 'block';
      signoutButton.style.display = 'none';
    }
  }

  /**
   *  Sign in the user upon button click.
   */
  function handleAuthClick(event) {
    gapi.auth2.getAuthInstance().signIn();
  }

  /**
   *  Sign out the user upon button click.
   */
  function handleSignoutClick(event) {
    gapi.auth2.getAuthInstance().signOut();
  }

  /**
   * Append a pre element to the body containing the given message
   * as its text node. Used to display the results of the API call.
   *
   * @param {string} message Text to be placed in pre element.
   */
  function appendPre(message) {
    var pre = document.getElementById('content');
    var textContent = document.createTextNode(message + '\n');
    pre.appendChild(textContent);
  }

  /**
   * Print the summary and start datetime/date of the next ten events in
   * the authorized user's calendar. If no events are found an
   * appropriate message is printed.
   */
  function listUpcomingEvents() {
    gapi.client.calendar.events.list({
      'calendarId': 'primary',
      'timeMin': (new Date()).toISOString(),
      'showDeleted': false,
      'singleEvents': true,
      'maxResults': 10,
      'orderBy': 'startTime'
    }).then(function(response) {
      var events = response.result.items;
      appendPre('Upcoming events:');

      if (events.length > 0) {
        for (i = 0; i < events.length; i++) {
          var event = events[i];
          var when = event.start.dateTime;
          if (!when) {
            when = event.start.date;
          }
          appendPre(event.summary + ' (' + when + ')')
        }
      } else {
        appendPre('No upcoming events found.');
      }
    });
  }
}
});
</script>

</body>

</html>